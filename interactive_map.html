<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Interactive Smart Vending Map</title>
<style>
    * {
        box-sizing: border-box;
    }
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #f2f4f8;
    }

    .page {
        max-width: 1100px;
        margin: 20px auto 40px;
        padding: 0 16px;
    }

    h1 {
        font-size: 24px;
        margin-bottom: 6px;
    }

    .subtitle {
        font-size: 14px;
        color: #555;
        margin-bottom: 18px;
    }

    #map-container {
        position: relative;
        width: 100%;
        max-width: 950px;
        margin: 0 auto;
    }

    #map {
        width: 100%;
        display: block;
        border-radius: 14px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    }

    /* 智能售货点 */
    .node {
        position: absolute;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #18a34a;
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        cursor: pointer;
        z-index: 10;
        box-shadow: 0 0 0 0 rgba(24,163,74,0.5);
        animation: pulse 1.8s infinite;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .node:hover {
        transform: scale(1.15);
        box-shadow: 0 0 15px rgba(24,163,74,0.9);
    }

    @keyframes pulse {
        0% { box-shadow: 0 0 0 0 rgba(24,163,74,0.6); }
        70% { box-shadow: 0 0 12px 10px rgba(24,163,74,0.0); }
        100% { box-shadow: 0 0 0 0 rgba(24,163,74,0.0); }
    }

    /* 浮层背景 */
    #overlay {
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.45);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 100;
    }

    /* 信息卡片 */
    #info-card {
        background: #ffffff;
        width: 380px;
        max-width: 90vw;
        border-radius: 16px;
        padding: 20px 22px;
        box-shadow: 0 12px 30px rgba(0,0,0,0.25);
    }

    #info-title {
        margin: 0 0 8px;
        font-size: 18px;
    }

    #info-subtitle {
        margin: 0 0 12px;
        font-size: 13px;
        color: #888;
    }

    #info-detail {
        font-size: 14px;
        line-height: 1.5;
        white-space: pre-line;
        color: #333;
        margin-bottom: 14px;
    }

    .badge-row {
        display: flex;
        gap: 6px;
        flex-wrap: wrap;
        margin-bottom: 10px;
    }

    .badge {
        font-size: 11px;
        padding: 4px 8px;
        border-radius: 999px;
        background: #e6f6ec;
        color: #137a3d;
    }

    .btn-row {
        text-align: right;
        margin-top: 8px;
    }

    .btn {
        display: inline-block;
        padding: 6px 12px;
        font-size: 13px;
        border-radius: 999px;
        border: none;
        cursor: pointer;
    }

    .btn-outline {
        background: transparent;
        border: 1px solid #bbb;
        margin-right: 6px;
    }

    .btn-primary {
        background: linear-gradient(135deg,#1dc75f,#18a34a);
        color: #fff;
    }

</style>
</head>
<body>

<div class="page">
    <h1>Interactive Vending Map</h1>
    <div class="subtitle">
        Click the glowing markers (A–G) on the map to view intelligent vending locations and context-aware recommendations.
    </div>

    <div id="map-container">
        <!-- 你的校园地图 -->
        <img id="map" src="TC.png" alt="Campus Map">

        <!-- A–G 智能售货点（坐标可根据你实际地图微调） -->
        <div class="node" style="top: 63%; left: 54%;" onclick="showInfo('A')">A</div>
        <div class="node" style="top: 47%; left: 68%;" onclick="showInfo('B')">B</div>
        <div class="node" style="top: 35%; left: 66%;" onclick="showInfo('C')">C</div>
        <div class="node" style="top: 25%; left: 49%;" onclick="showInfo('D')">D</div>
        <div class="node" style="top: 40%; left: 39%;" onclick="showInfo('E')">E</div>
        <div class="node" style="top: 55%; left: 38%;" onclick="showInfo('F')">F</div>
        <div class="node" style="top: 70%; left: 47%;" onclick="showInfo('G')">G</div>
    </div>
</div>

<!-- 信息浮层 -->
<div id="overlay" onclick="hideInfo(event)">
    <div id="info-card">
        <h2 id="info-title"></h2>
        <p id="info-subtitle"></p>
        <div class="badge-row" id="badge-row"></div>
        <div id="info-detail"></div>
        <div class="btn-row">
            <button class="btn btn-outline" onclick="hideInfo(event)">Close</button>
            <button class="btn btn-primary" onclick="hideInfo(event)">OK</button>
        </div>
    </div>
</div>

<script>
const infoData = {
    A: {
        title: "Point A · Sports Ground Smart Vending",
        subtitle: "High-intensity activity zone",
        badges: ["Post-workout", "Electrolytes", "Zero-sugar priority"],
        detail:
"Location: next to the sports ground.\n\nRecommendation logic:\n• After exercise, the engine surfaces electrolyte and functional hydration drinks.\n• Evening sessions promote low-caffeine recovery options.\n• Behaviour data from step count and gym check-ins refine suggestions over time."
    },
    B: {
        title: "Point B · Dormitory Cluster",
        subtitle: "Late-night hydration and light drinks",
        badges: ["Low caffeine", "Night mode", "Comfort drinks"],
        detail:
"Located beside student dormitories.\n\nRecommendation logic:\n• Night mode hides high-caffeine products after 10 p.m.\n• Focus on lightly flavoured water and low-sugar tea.\n• Loyalty engine rewards consistent hydration before sleep."
    },
    C: {
        title: "Point C · Teaching Block C",
        subtitle: "Between-class quick choices",
        badges: ["Zero sugar", "Fast decision", "Study-friendly"],
        detail:
"Near major lecture halls.\n\nRecommendation logic:\n• During peak class hours, the interface highlights 0-sugar beverages.\n• One-tap ‘Quick pick’ cards reduce decision time to a few seconds.\n• Heavy or highly carbonated drinks are deprioritised during morning sessions."
    },
    D: {
        title: "Point D · Library Area",
        subtitle: "Long study sessions",
        badges: ["Light caffeine", "Focus", "Gentle hydration"],
        detail:
"Placed next to the library entrance.\n\nRecommendation logic:\n• Promotes light-caffeine and non-caffeinated drinks for sustained concentration.\n• Time-based rules prevent excessive caffeine at night.\n• Study streaks can trigger small reward coupons."
    },
    E: {
        title: "Point E · Central Plaza",
        subtitle: "Social and event hotspot",
        badges: ["Trending flavours", "Limited editions", "High visibility"],
        detail:
"Central social square with high footfall.\n\nRecommendation logic:\n• Ideal for new product launches and seasonal flavours.\n• Dynamic cards show ‘Today’s Highlight’ based on campaign settings.\n• Visual design emphasises shareable, lifestyle-oriented beverages."
    },
    F: {
        title: "Point F · Canteen Entrance",
        subtitle: "After-meal refreshment",
        badges: ["Sparkling water", "Digestive friendly", "Cool-down"],
        detail:
"Next to the main canteen.\n\nRecommendation logic:\n• After peak lunch time, the engine prioritises sparkling and lightly flavoured water.\n• Heavy sugary drinks are de-emphasised to support healthier post-meal choices.\n• Simple prompts encourage students to replace at least one sugary drink per week."
    },
    G: {
        title: "Point G · Campus Main Entrance",
        subtitle: "Mixed-traffic gateway",
        badges: ["Best sellers", "Cross-channel ID", "First touchpoint"],
        detail:
"Located at the primary campus entrance.\n\nRecommendation logic:\n• Stocked with Chi-Forest hero products and campus bestsellers.\n• Serves as an onboarding point for new users to link their digital ID.\n• Behaviour data collected here can be used to personalise other vending locations."
    }
};

function showInfo(id) {
    const data = infoData[id];
    document.getElementById("info-title").innerText = data.title;
    document.getElementById("info-subtitle").innerText = data.subtitle;
    document.getElementById("info-detail").innerText = data.detail;

    const badgeRow = document.getElementById("badge-row");
    badgeRow.innerHTML = "";
    data.badges.forEach(b => {
        const span = document.createElement("span");
        span.className = "badge";
        span.textContent = b;
        badgeRow.appendChild(span);
    });

    document.getElementById("overlay").style.display = "flex";
}

function hideInfo(event) {
    // 防止点击卡片自身触发关闭
    if (event && event.target && event.target.id === "info-card") return;
    document.getElementById("overlay").style.display = "none";
}
</script>

</body>
</html>
